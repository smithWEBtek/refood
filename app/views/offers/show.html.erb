<%= render 'layouts/flash_error' %>
<%= render 'layouts/flash_message' %>

<h1><%= @offer.headline %></h1>
<h4><%= @offer.description %></h4>
<div class="small">Posted on <%= format_date(@offer.created_at.localtime) %></div><br>

<div class="left-padding">
  <% if @offer.availability.present? %>
    <b>Availability: </b><%= @offer.availability %><br>
  <% end %>
  <b>Open: </b><%= @offer.closed ? "no" : "yes" %><br>
</div>

 <% if @offer.user != current_user %>
  <br>
  <div class="lt-grey-box">
    <%= render "contact_info" %>
  </div>
<% end %>

<% if @offer.user == current_user %>
  <br>
  <% if @requests.count == 0 %>
    <h3><%= link_to "#{@requests.count} open requests", offer_requests_path(@offer) %></h3>
  <% elsif @requests.count == 1 %>
    <h3><%= link_to "1 open request", offer_requests_path(@offer) %></h3>
  <% else %>
    <h3><%= link_to "#{@requests.count} open requests", offer_requests_path(@offer) %></h3>
  <% end %>

  <br>
  <div class="btn-group">
    <%= link_to "Edit offer", edit_offer_path(@offer), class: "btn btn-primary" %>
    <%= button_to "Delete offer", offer_path(@offer), method: "delete", class: "btn btn-outline-danger btn-left-margin", data: { confirm: "Are you sure you want to delete this offer?"} %>
  </div>
<% elsif has_request(current_user, @offer) %>
  <br>
   <%= link_to "View your request for this item", offer_request_path(@offer, @request) %>
<% else %>
  <br>
  <%= link_to "Make request", new_offer_request_path(@offer), class: "btn btn-success" %>
<% end %>
